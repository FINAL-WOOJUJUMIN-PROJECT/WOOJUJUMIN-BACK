<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	

<mapper namespace="com.woojujumin.dao.CalendarDao">

<!-- 달력가져오기 -->
<select id="getCalendarList" parameterType="com.woojujumin.dto.CalendarDto" resultType="com.woojujumin.dto.CalendarDto">
	select * 
	from (select row_number()over(partition by substr(rdate, 1, 8) order by rdate asc) as rnum,
	 	calSeq, manager, title, content, rdate, wdate, tag
     	from calendar 
     	where substr(rdate, 1, 6)=202304 ) a
	where rnum between 1 and 5;
</select>

<!-- 230414 일정 등록하기 -->
<insert id="calwrite" parameterType="com.woojujumin.dto.CalendarDto" >
	INSERT INTO CALENDAR(manager, title, content, rdate, wdate, tag)
	VALUES (#{manager}, #{title}, #{content}, #{rdate}, now(), #{tag})
</insert>	
</mapper>